<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>口腔挑戰賽：熱狗／氣球／棒棒糖</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <main>
    <h1>口腔挑戰賽</h1>

    <section id="ui">
      <div class="row">
        <label>選擇關卡：</label>
        <select id="mode">
          <option value="hotdog">嘴巴切熱狗（開合次數）</option>
          <option value="balloon">吹氣球（連續吹氣）</option>
          <option value="lollipop">舔棒棒糖（快速開合）</option>
        </select>
        <button id="startBtn">開始</button>
        <button id="resetBtn">重來</button>
      </div>

      <div class="row">
        <div>麥克風音量：<span id="volVal">0.00</span></div>
        <div class="bar"><div id="volBar"></div></div>
      </div>

      <div class="row">
        <div>狀態：<span id="stateText">待機</span></div>
        <div>進度：<span id="progressText">0</span></div>
        <div>時間：<span id="timeText">00:00</span></div>
      </div>
    </section>

    <section id="playfield">
      <!-- Balloon 圓、Hotdog & Lollipop 以進度條呈現 -->
      <canvas id="balloon" width="320" height="240"></canvas>
      <div id="hotdogUI" class="stack">
        <div class="meter"><div id="hotdogFill"></div></div>
        <p>咀嚼次數目標：<span id="hotdogGoal">12</span></p>
      </div>
      <div id="lollipopUI" class="stack">
        <div class="meter"><div id="lollipopFill"></div></div>
        <p>舔一舔（快速開合）目標：<span id="lollipopGoal">20</span></p>
      </div>
    </section>

    <section id="result" class="hidden">
      <h2 id="resultTitle">完成！</h2>
      <p id="resultDetail"></p>
      <button id="againBtn">再玩一次</button>
    </section>

    <p class="hint">小提醒：允許麥克風、盡量在安靜環境；若偵測不穩，可改用「大聲 vs 小聲」策略。</p>
  </main>
<!-- 🔵 相機畫面（只在熱狗關卡用） -->
<video id="cam" width="320" height="240" playsinline autoplay muted class="hidden"></video>

<div id="hotdogUI" class="stack">
  <div class="meter"><div id="hotdogFill"></div></div>
  <p>咀嚼次數目標：<span id="hotdogGoal">12</span></p>
  <p>嘴型指標 MAR：<span id="marVal">0.00</span>
    （開口門檻 <span id="marOpen">—</span>；閉口門檻 <span id="marClose">—</span>）
  </p>
  <p id="calibTip">請先「閉嘴」1 秒進行校準…</p>
</div>

  <script src="main.js"></script>
</body>
</html>

* { box-sizing: border-box; }
body { font-family: system-ui, "Noto Sans TC", sans-serif; margin: 0; padding: 16px; }
main { max-width: 720px; margin: 0 auto; }
h1 { margin: 0 0 12px; }
.row { display: flex; align-items: center; gap: 12px; margin: 8px 0; flex-wrap: wrap; }
.bar { width: 220px; height: 10px; background: #eee; border-radius: 999px; overflow: hidden; }
#volBar { height: 100%; width: 0%; background: #6aa9ff; transition: width 80ms linear; }

#playfield { margin: 12px 0; display: grid; grid-template-columns: 1fr; gap: 12px; }
#balloon { background: #f9fafb; border: 1px solid #ddd; border-radius: 8px; }
.stack { padding: 12px; border: 1px solid #ddd; border-radius: 8px; background: #fafafa; }
.meter { width: 100%; height: 16px; background: #eee; border-radius: 999px; overflow: hidden; margin-bottom: 8px; }
#hotdogFill, #lollipopFill { height: 100%; width: 0%; background: #34d399; transition: width 120ms linear; }

.hidden { display: none; }
.hint { color: #666; font-size: 12px; }
button { padding: 8px 12px; border-radius: 10px; border: 1px solid #ddd; background: white; cursor: pointer; }
button:hover { background: #f5f5f5; }
select { padding: 6px 10px; border-radius: 8px; border: 1px solid #ccc; }
